{% extends "travelplans/index.html" %}

{% block content %}
{% load staticfiles %}

<div class="container col-md-8 col-md-offset-2">
<div class="row" style="padding-top:50px">
	<div class="col-md-3">
		<img src="{% static 'travelplans/sample.jpg' %}" class="img-circle" style="height:200px;width:200px">
	</div>
	<div class="col-md-7" style="">
		{% ifequal current_user.is_superuser False %}
		<div class="row">
			<p><button class="btn btn-primary pull-right">Share Plan</button></p>
		</div>
		<br/>
			{% ifnotequal current_user plan.holder %}
				<div class="row">
					<p><button class="btn btn-primary pull-right">Join Plan</button></p>
				</div>
				<br/>
			{% endifnotequal %}
		{% endifequal %}
		{% ifequal current_user plan.holder %}
			<div class="row">
				<p>
					<button class="btn btn-primary pull-right" data-toggle="modal" data-target="#editPlanModal">
						Edit Plan
					</button>
				</p>
			</div>
			<br/>
			<div class="row">
				<p>
				<button class="btn btn-primary pull-right" data-toggle="modal" data-target="#deletePlanModal">Delete Plan
				</button>
			</p>
			</div>
			<br/>
		{% endifequal %}
		
	</div>
</div>

<div class="row" style="padding-top:50px">
	<p class="bg-info" style="font-size:20px; padding-top:50px; padding-left:20px; padding-right:20px; padding-bottom:50px">
	Plan Owner: {{plan.holder}}
	<br/>
	Destination: {{plan.destination}}
	<br/> 
	Depart Date: {{plan.depart_time| date:"m-d-Y"}}
	<br/> 
	Return Date: {{plan.return_time| date:"m-d-Y"}}
	<br/> 
	Description: {{plan.description}}
	<br/>
	Max Traveller: {{plan.limit}}
	</p>
</div>

</div>

<div class="modal fade" id="editPlanModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Edit Plan</h4>
      </div>
      <div class="modal-body">
        <form id="editform" role="form" action="{% url 'travelplans:create_plan' %}" method="post">
        {% csrf_token %}
            <div class="form-group">
                <label for="editdestination">Destination</label>
                <input type="text" name="editdestination" class="form-control" id="editdestination" value="{{plan.destination}}">
            </div>
            <div class="form-group">
                <label for="editdepart">Depart Time</label>
 <input type="date" name="editdepart" class="form-control" id="editdepart" value="{{plan.depart_time| date:"m-d-Y"}}">
            </div>
            <div class="form-group">
                <label for="editreturn">Return Time</label>
  <input type="date" name="editreturn" class="form-control" id="editreturn" value="{{plan.return_time| date:"m-d-Y"}}">
            </div>
            <div class="form-group">
                <label for="editdescription">Description</label>
 <textarea class="form-control" name="editdescription" id="editdescription" row="3">{{plan.description}}
 </textarea>
            </div>
            <div class="form-group">
                <label for="editlimit">Max Travellers</label>
                <input type="number" name="editlimit" class="form-control" id="editlimit" value="{{plan.limit}}">
            </div>
            <button id="editbutton" type="submit" class="btn btn-primary">Create</button>
        </form>
      </div>
    </div>
  </div>
</div>
 <!-- Modal -->

 <div class="modal fade" id="deletePlanModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Delete Plan</h4>
      </div>
      <div class="modal-body">
        <form id="deleteform" role="form" action="{% url 'travelplans:create_plan' %}" method="post">
        <p> Are you sure you want to delete this plan? </p>
            <button id="deletebutton" type="submit" class="btn btn-primary">Yes</button>
        </form>
      </div>
    </div>
  </div>
</div>
 <!-- Modal -->
{% endblock %}